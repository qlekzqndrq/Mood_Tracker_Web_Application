<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mood Tracker</title>
    
    <link rel="stylesheet" href="styles.css">
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Reddit+Sans:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>

    <nav class="navbar">
        <div class="logo">
            <svg width="140" height="32" viewBox="0 0 178 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill="#4865DB" d="M.5 20c0-9.428 0-14.142 2.929-17.071C6.358 0 11.072 0 20.5 0s14.142 0 17.071 2.929C40.5 5.858 40.5 10.572 40.5 20s0 14.142-2.929 17.071C34.642 40 29.928 40 20.5 40S6.358 40 3.429 37.071C.5 34.142.5 29.428.5 20Z"/>
                <path fill="#fff" d="M24.5 26c.552 0 1.01.452.9.993a5 5 0 0 1-9.8 0c-.11-.54.348-.993.9-.993h8ZM26.602 17.776c-.533.143-.86.701-.59 1.183a4 4 0 1 0 .626-4.754c-.386.395-.214 1.019.264 1.295l.507.293c.772.445.62 1.601-.241 1.832l-.566.151ZM14.398 17.776c.533.143.86.701.59 1.183a4 4 0 1 1-.626-4.754c.386.395.214 1.019-.264 1.295l-.507.293c-.772.445-.62 1.601.24 1.832l.567.151Z"/>
                <path fill="#21214D" d="M57.987 27.5V12.386h2.225l5.209 7.844h.082l5.22-7.844h2.214V27.5h-2.933v-5.886l.062-3.712h-.082l-4.194 6.542h-.656l-4.194-6.542h-.082l.061 3.712V27.5h-2.932Zm21.687.164c-1.046 0-1.997-.24-2.851-.718a5.505 5.505 0 0 1-2.03-2.01c-.5-.854-.749-1.838-.749-2.953 0-1.114.25-2.091.749-2.932a5.371 5.371 0 0 1 2.03-1.98c.855-.478 1.805-.717 2.85-.717 1.067 0 2.024.24 2.872.718a5.223 5.223 0 0 1 2.01 1.979c.498.84.748 1.818.748 2.932 0 1.115-.25 2.099-.748 2.953a5.428 5.428 0 0 1-2.02 2.01c-.848.479-1.802.718-2.861.718Zm0-2.45a2.8 2.8 0 0 0 1.486-.4 2.88 2.88 0 0 0 1.036-1.139c.253-.485.38-1.049.38-1.692 0-.628-.124-1.179-.37-1.65a2.75 2.75 0 0 0-1.025-1.118c-.43-.274-.93-.41-1.497-.41a2.8 2.8 0 0 0-1.487.4 2.75 2.75 0 0 0-1.036 1.107c-.252.479-.379 1.036-.379 1.671 0 .643.127 1.207.38 1.692.252.486.594.865 1.025 1.139a2.8 2.8 0 0 0 1.487.4Zm11.73 2.45c-1.046 0-1.996-.24-2.85-.718a5.506 5.506 0 0 1-2.031-2.01c-.499-.854-.748-1.838-.748-2.953 0-1.114.249-2.091.748-2.932a5.372 5.372 0 0 1 2.03-1.98c.855-.478 1.805-.717 2.85-.717 1.067 0 2.024.24 2.872.718a5.223 5.223 0 0 1 2.01 1.979c.499.84.748 1.818.748 2.932 0 1.115-.25 2.099-.748 2.953a5.428 5.428 0 0 1-2.02 2.01c-.848.479-1.802.718-2.861.718Zm0-2.45a2.8 2.8 0 0 0 1.487-.4 2.88 2.88 0 0 0 1.035-1.139c.253-.485.38-1.049.38-1.692 0-.628-.123-1.179-.37-1.65a2.75 2.75 0 0 0-1.025-1.118c-.43-.274-.93-.41-1.497-.41a2.8 2.8 0 0 0-1.487.4c-.437.26-.782.629-1.035 1.107-.253.479-.38 1.036-.38 1.671 0 .643.127 1.207.38 1.692.253.486.594.865 1.025 1.139a2.8 2.8 0 0 0 1.487.4Zm16.837 2.45a6.295 6.295 0 0 1-1.21-.543 2.878 2.878 0 0 1-.759-.646 1.83 1.83 0 0 1-.349-.78l.328.205h-.953l.482-1.281V18.66l-.513-1.128h.277V11.71h2.83v12.192c0 .417.065.718.195.902.13.178.359.332.687.462l-1.015 2.4Zm-5.896 0a4.709 4.709 0 0 1-3.353-1.425c-.458-.479-.824-1.07-1.098-1.774-.266-.704-.396-1.518-.39-2.44-.013-1.231.213-2.27.677-3.118.472-.847 1.084-1.487 1.836-1.917a4.676 4.676 0 0 1 2.389-.656c.937 0 1.764.246 2.482.738.717.492 1.278 1.162 1.681 2.01.41.847.619 1.797.626 2.85-.007 1.06-.222 2.027-.646 2.902-.424.868-1.002 1.559-1.733 2.071-.725.506-1.549.76-2.471.76Zm.625-2.4a2.489 2.489 0 0 0 1.395-.42c.41-.28.731-.666.964-1.159.239-.492.358-1.062.358-1.712 0-.677-.119-1.254-.358-1.733-.24-.485-.561-.858-.964-1.117a2.339 2.339 0 0 0-1.344-.38 2.543 2.543 0 0 0-1.435.39c-.41.266-.732.642-.964 1.128-.232.485-.345 1.056-.338 1.712-.007.65.102 1.22.328 1.713.232.492.55.878.953 1.158.41.274.879.414 1.405.42Zm16.837 2.4c-1.251 0-2.195-.345-2.83-1.036-.629-.697-.944-1.589-.944-2.676V13.227h2.83v10.561c0 .5.12.858.359 1.077.246.212.537.318.872.318.157 0 .307-.017.451-.052.15-.04.28-.092.39-.154l.922 2.236a3.75 3.75 0 0 1-.953.338 5.103 5.103 0 0 1-1.097.113Zm-5.578-8.86v-2.296h7.218v2.297h-7.218Zm8.233 8.696V16.518h2.759v1.58h.307l-.697.748c.171-.376.424-.756.759-1.139a4.368 4.368 0 0 1 1.261-.963c.499-.26 1.08-.39 1.743-.39.28 0 .53.02.749.062.218.04.376.085.471.133l-1.138 2.717a1.362 1.362 0 0 0-.349-.102 2.717 2.717 0 0 0-.553-.052 2.41 2.41 0 0 0-.841.164 2.473 2.473 0 0 0-1.415 1.271c-.151.322-.226.698-.226 1.129V27.5h-2.83Zm10.141.164c-.738 0-1.388-.147-1.948-.44a3.405 3.405 0 0 1-1.313-1.21 3.18 3.18 0 0 1-.471-1.713c0-.656.177-1.234.533-1.733.362-.506.899-.9 1.61-1.18.711-.286 1.589-.43 2.635-.43h2.44v1.866h-2.419c-.657 0-1.169.11-1.539.328-.369.22-.553.56-.553 1.026 0 .28.068.52.205.717.143.192.342.339.595.441.252.103.54.154.861.154.294 0 .636-.065 1.025-.195.39-.13.728-.338 1.015-.625.294-.294.441-.677.441-1.149v-1.127l-.184-.554v-1.415c0-.24-.034-.462-.103-.667a1.373 1.373 0 0 0-.338-.543 1.431 1.431 0 0 0-.605-.359 2.671 2.671 0 0 0-.902-.133 5.71 5.71 0 0 0-1.098.112 7.037 7.037 0 0 0-1.097.308 4.404 4.404 0 0 0-.882.42l-.923-2.194a5.913 5.913 0 0 1 1.098-.471 9.453 9.453 0 0 1 1.517-.38 9.962 9.962 0 0 1 1.774-.154c1.005 0 1.795.137 2.369.41.574.274.994.622 1.261 1.046.273.417.448.855.523 1.313.075.458.113.875.113 1.25v3.426c0 .417.041.731.123.943.089.205.26.349.513.43l.246.083-1.026 2.4-.328-.124c-.601-.226-1.039-.489-1.312-.79-.274-.307-.431-.611-.472-.912l.533.349h-.902l.615-.288c-.232.465-.684.875-1.354 1.23-.663.356-1.421.534-2.276.534Zm12.479-.041a5.941 5.941 0 0 1-2.266-.43 5.853 5.853 0 0 1-1.846-1.2 5.674 5.674 0 0 1-1.241-1.795 5.574 5.574 0 0 1-.451-2.245c0-.8.147-1.538.441-2.215a5.54 5.54 0 0 1 1.241-1.784 5.637 5.637 0 0 1 1.815-1.19 5.8 5.8 0 0 1 2.204-.42 6.16 6.16 0 0 1 1.836.277 5.435 5.435 0 0 1 1.579.748l-1.046 2.297a3.411 3.411 0 0 0-1.446-.748 3.49 3.49 0 0 0-.851-.103c-.601 0-1.131.14-1.589.42-.458.28-.814.66-1.067 1.139a3.308 3.308 0 0 0-.379 1.589c0 .595.13 1.135.39 1.62.259.479.618.861 1.076 1.148.458.28.981.42 1.569.42a3.8 3.8 0 0 0 1.364-.245c.431-.171.755-.362.974-.575l1.025 2.349c-.396.26-.885.482-1.466.666a6.063 6.063 0 0 1-1.866.277Zm4.019-.123V11.709h2.83v9.177h.882l-.964.503 4.133-4.881h3.404l-5.342 6.05v-1.61l5.598 6.552h-3.394l-4.419-5.301.984.533h-.882V27.5h-2.83Zm15.145.164c-1.155 0-2.16-.24-3.015-.718a5.137 5.137 0 0 1-1.989-2c-.465-.854-.697-1.828-.697-2.922 0-1.155.239-2.153.718-2.994.485-.847 1.128-1.504 1.927-1.969a5.209 5.209 0 0 1 2.646-.697c.909 0 1.74.212 2.492.636a4.789 4.789 0 0 1 1.825 1.774c.458.759.687 1.658.687 2.697 0 .239-.014.468-.041.687-.028.218-.069.475-.123.769h-8.019V21.04h5.578c0-.472-.102-.885-.307-1.24a2.162 2.162 0 0 0-.851-.831c-.356-.205-.769-.308-1.241-.308-.574 0-1.073.14-1.497.42a2.727 2.727 0 0 0-.974 1.149c-.226.492-.339 1.063-.339 1.712 0 .677.127 1.272.38 1.785a2.91 2.91 0 0 0 1.087 1.21c.471.287 1.028.43 1.671.43.362 0 .714-.04 1.056-.123.342-.089.66-.205.954-.349.294-.143.547-.3.759-.471l.922 2.235c-.437.301-.97.544-1.599.728a7.034 7.034 0 0 1-2.01.277Zm5.568-.164V16.518h2.758v1.58h.308l-.698.748c.171-.376.424-.756.759-1.139a4.381 4.381 0 0 1 1.261-.963c.499-.26 1.081-.39 1.744-.39.28 0 .529.02.748.062.219.04.376.085.472.133l-1.138 2.717a1.375 1.375 0 0 0-.349-.102 2.727 2.727 0 0 0-.554-.052c-.266 0-.547.055-.841.164a2.51 2.51 0 0 0-.81.472 2.487 2.487 0 0 0-.605.8c-.15.321-.225.697-.225 1.128V27.5h-2.83Z"/></svg>
          
        </div>
        
        <div class="user-profile" onclick="toggleDropdown()">
            
            <img 
                id="nav-avatar" 
                src="https://ui-avatars.com/api/?name=User" 
                alt="Profile"
                style="width: 50px; height: 50px; border-radius: 50%; object-fit: cover; border: 2px solid #CBCDD0;"
            >
            
            <svg class="chevron-icon" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill="#21214D" d="M5.727 5.86 1.102 1.265C.945 1.14.945.89 1.102.734l.625-.593a.36.36 0 0 1 .53 0l3.75 3.687L9.728.141c.156-.157.406-.157.53 0l.626.593c.156.157.156.407 0 .532L6.258 5.859a.36.36 0 0 1-.531 0Z"/>
            </svg>
            
            <div class="dropdown-menu" id="userDropdown">
                <div class="dropdown-header">
                    <p id="dropdown-name" class="dropdown-name">Loading...</p>
                    <p id="dropdown-email" class="dropdown-email">...</p>
                </div>
                
                <hr class="dropdown-divider">
                
                <button onclick="openSettings(event)" class="dropdown-item">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1.82.33h.09a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
                    Settings
                </button>
                
                <button onclick="logout()" class="dropdown-item">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>
                    Logout
                </button>
            </div>
        </div>
    </nav>

    <div class="container">
        
        <header id="hero-empty" class="hero-section" style="display: none;">
            <p class="greeting">Hello, <span class="user-name-display">User</span>!</p>
            <h1>How are you feeling today?</h1>
            <p class="date-display" id="currentDateDisplay">Wednesday, April 16th</p>
            <button class="primary-btn" onclick="openLogModal()">Log today's mood</button>
        </header>

        <header id="hero-logged" class="hero-logged-grid" style="display: none;">
        
        <div class="main-mood-card">
            <div class="mood-content">
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                    <p class="greeting" style="margin: 0; font-size: 18px; color: #57577B;">I'm feeling</p>
                    <button onclick="openLogModal()" class="edit-btn" title="Edit today's mood">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>
                    </button>
                </div>
                
                <h1 id="today-mood-text" style="font-size: 42px; margin-bottom: 20px;">Very Happy</h1>
                
                <blockquote id="today-quote" style="margin: 0; color: #57577B; font-style: italic; border-left: 4px solid #4865DB; padding-left: 15px;">
                    "Your quote will appear here..."
                </blockquote>
            </div>

            <div id="today-emoji" class="big-emoji" style="font-size: 140px; line-height: 1;">ü§©</div>
        </div>

        <div class="side-info">
            
            <div class="mini-card">
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 5px;">
                    <span style="font-size: 20px;">üí§</span> 
                    <span style="color: #57577B; font-weight: 600;">Sleep</span>
                </div>
                <strong id="today-sleep" style="font-size: 28px; color: #21214D;">-- hours</strong>
            </div>

            <div class="mini-card reflection-card">
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 5px;">
                    <span style="font-size: 20px;">‚ú®</span>
                    <span style="color: #57577B; font-weight: 600;">Reflection of the day</span>
                </div>
                <p id="today-reflection" class="reflection-text">No reflection added.</p>
                <div id="today-tags" class="tags-display"></div>
            </div>

        </div>
        </header>

        <main class="dashboard-grid">
            
            <aside class="stats-column">
                
                <div class="stat-card mood-gradient" id="mood-card-container">
                    <h4>Average Mood <span class="sub-text">(last 5 check-ins)</span></h4>
                    
                    <div id="mood-empty" style="display: none;">
                        <h3>Keep tracking!</h3>
                        <p>Log 5 check-ins to see your average mood.</p>
                    </div>

                    <div id="mood-full" style="display: block;">
                        <h2 id="stats-mood-val">-</h2> 
                        <p id="stats-mood-comp" class="comparison-text">Collecting more history...</p>
                    </div>
                </div>

                <div class="stat-card sleep-gradient" id="sleep-card-container">
                    <h4>Average Sleep <span class="sub-text">(last 5 check-ins)</span></h4>
                    
                    <div id="sleep-empty" style="display: none;">
                        <h3>Not enough data yet!</h3>
                        <p>Track 5 nights to view average sleep.</p>
                    </div>

                    <div id="sleep-full" style="display: block;">
                        <h2 id="stats-sleep-val">- Hours</h2>
                        <p id="stats-sleep-comp" class="comparison-text">Collecting more history...</p>
                    </div>
                </div>

            </aside>

            <section class="chart-section">
                <h3>Mood and sleep trends</h3>
                <div class="chart-wrapper">
                    <canvas id="trendsChart"></canvas>
                </div>
            </section>
        </main>
    </div>

    <div id="settingsModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <span class="close-btn" onclick="closeSettings()">&times;</span>
            <h2>Update your profile</h2>
            <p class="modal-subtitle">Personalize your account with your name and photo.</p>
            
            <form id="settingsForm">
                <label>Name</label>
                <input type="text" id="setting-name" placeholder="Your Name">
                
                <label>Avatar URL (Link imagine)</label>
                <div class="avatar-input-group">
                    <img src="" id="setting-avatar-preview" class="avatar-preview">
                    <input type="text" id="setting-avatar" placeholder="https://...">
                </div>

                <button type="submit" class="primary-btn full-width">Save changes</button>
            </form>
        </div>
    </div>

    <div id="logModal" class="modal-overlay">
        <div class="modal-content">
            <span class="close-btn" onclick="closeAllModals()">&times;</span>
            
            <div class="progress-bar">
                <div class="step-dash active" id="dash-1"></div>
                <div class="step-dash" id="dash-2"></div>
                <div class="step-dash" id="dash-3"></div>
                <div class="step-dash" id="dash-4"></div>
            </div>

            <form id="wizardForm">
                
                <div class="wizard-step" id="step-1">
                    <h2>Log your mood</h2>
                    <p>How was your mood today?</p>
                    <div class="selection-list" id="mood-options">
                        <div class="option-btn" onclick="selectMood(5, this)">
                            <div style="display:flex; align-items:center"><div class="radio-circle"></div> Very Happy</div> <span>ü§©</span>
                        </div>
                        <div class="option-btn" onclick="selectMood(4, this)">
                            <div style="display:flex; align-items:center"><div class="radio-circle"></div> Happy</div> <span>üôÇ</span>
                        </div>
                        <div class="option-btn" onclick="selectMood(3, this)">
                            <div style="display:flex; align-items:center"><div class="radio-circle"></div> Neutral</div> <span>üòê</span>
                        </div>
                        <div class="option-btn" onclick="selectMood(2, this)">
                            <div style="display:flex; align-items:center"><div class="radio-circle"></div> Sad</div> <span>‚òπÔ∏è</span>
                        </div>
                        <div class="option-btn" onclick="selectMood(1, this)">
                            <div style="display:flex; align-items:center"><div class="radio-circle"></div> Very Sad</div> <span>üò≠</span>
                        </div>
                    </div>
                    <button type="button" class="primary-btn full-width" onclick="nextStep(2)">Continue</button>
                </div>

                <div class="wizard-step" id="step-2" style="display: none;">
                    <h2>Log your mood</h2>
                    <p>How did you feel? (Select up to 3)</p>
                    <div class="tags-grid" id="tags-container">
                        <div class="tag-chip" onclick="toggleTag(this)">Joyful</div>
                        <div class="tag-chip" onclick="toggleTag(this)">Anxious</div>
                        <div class="tag-chip" onclick="toggleTag(this)">Calm</div>
                        <div class="tag-chip" onclick="toggleTag(this)">Tired</div>
                        <div class="tag-chip" onclick="toggleTag(this)">Productive</div>
                        <div class="tag-chip" onclick="toggleTag(this)">Stressed</div>
                        <div class="tag-chip" onclick="toggleTag(this)">Grateful</div>
                        <div class="tag-chip" onclick="toggleTag(this)">Lonely</div>
                    </div>
                    <button type="button" class="primary-btn full-width" onclick="nextStep(3)">Continue</button>
                </div>

                <div class="wizard-step" id="step-3" style="display: none;">
                    <h2>Log your mood</h2>
                    <p>Write about your day...</p>
                    <textarea id="wizard-reflection" placeholder="Today I felt..." maxlength="150" oninput="updateCharCount(this)"></textarea>
                    <div class="char-count"><span id="char-current">0</span>/150</div>
                    <button type="button" class="primary-btn full-width" onclick="nextStep(4)">Continue</button>
                </div>

                <div class="wizard-step" id="step-4" style="display: none;">
                    <h2>Log your mood</h2>
                    <p>How many hours did you sleep?</p>
                    <div class="selection-list" id="sleep-options">
                        <div class="option-btn" onclick="selectSleep(9, this)"><div class="radio-circle"></div> 9+ hours</div>
                        <div class="option-btn" onclick="selectSleep(7.5, this)"><div class="radio-circle"></div> 7-8 hours</div>
                        <div class="option-btn" onclick="selectSleep(6, this)"><div class="radio-circle"></div> 5-6 hours</div>
                        <div class="option-btn" onclick="selectSleep(4, this)"><div class="radio-circle"></div> 3-4 hours</div>
                        <div class="option-btn" onclick="selectSleep(2, this)"><div class="radio-circle"></div> 0-2 hours</div>
                    </div>
                    <button type="button" class="primary-btn full-width" onclick="submitWizard()">Submit</button>
                </div>

            </form>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>